<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="initial-scale=1, minimum-scale=1, maximum-scale=1" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="x-ua-compatible" content="IE=10" />
  <title>SCORM Course with GA4</title>

  <!-- âœ… Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VGK4EY7VMT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-VGK4EY7VMT');
  </script>

  <!-- âœ… Inject Fake SCORM API -->
  <script>
    (function () {
      const fakeAPI = {
        LMSInitialize: function () {
          console.log("âœ… LMSInitialize triggered");
          if (typeof gtag === 'function') {
            gtag('event', 'CourseStarted', { debug_mode: true });
          }
          return "true";
        },
        LMSFinish: function () {
          console.log("âœ… LMSFinish triggered");
          if (typeof gtag === 'function') {
            gtag('event', 'CourseCompleted', { debug_mode: true });
          }
          return "true";
        },
        LMSGetValue: function (name) { return ""; },
        LMSSetValue: function (name, value) { return "true"; },
        LMSCommit: function () { return "true"; },
        LMSGetLastError: function () { return "0"; },
        LMSGetErrorString: function (code) { return "No error"; },
        LMSGetDiagnostic: function (code) { return "No diagnostic available"; }
      };

      window.API = fakeAPI;
      window.parent.API = fakeAPI;
      window.top.API = fakeAPI;
    })();
  </script>

  <!-- âœ… Styles -->
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      text-align: center;
      background-color: #f0f0f0;
    }

    #initialLoading {
      background: url('assets/htmlimages/loader.gif') no-repeat center center;
      background-color: #ffffff;
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 10010;
    }

    #courseContainer {
      display: none;
      padding-top: 100px;
      font-size: 24px;
      color: #333;
    }
  </style>
</head>

<body onload="onBodyLoad()">
  <!-- ðŸ”„ Loading Spinner -->
  <div id="initialLoading">Loading...</div>

  <!-- âœ… Placeholder where course would appear -->
  <div id="courseContainer">
    âœ… Your SCORM Course is now loaded.<br />
    (You may now simulate LMSInitialize/LMSFinish)
  </div>

  <!-- âœ… Loader script -->
  <script>
    function onBodyLoad() {
      console.log("âœ… Page loaded");
      // Simulate real loading (1 sec)
      setTimeout(function () {
        document.getElementById('initialLoading').style.display = 'none';
        document.getElementById('courseContainer').style.display = 'block';

        // Simulate SCORM event
        if (typeof API !== 'undefined' && typeof API.LMSInitialize === 'function') {
          API.LMSInitialize();
        }
      }, 1000);
    }

    // Optional: Simulate end of course after 5 seconds
    setTimeout(() => {
      if (typeof API !== 'undefined' && typeof API.LMSFinish === 'function') {
        API.LMSFinish();
      }
    }, 6000);
  </script>

  <noscript style="text-align:center;font-size:24px;">Enable JavaScript to view this content.</noscript>
</body>
</html>
